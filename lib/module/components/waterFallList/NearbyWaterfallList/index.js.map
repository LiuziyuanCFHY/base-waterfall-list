{"version":3,"names":["React","memo","useCallback","useEffect","useMemo","useRef","useState","Text","View","StyleSheet","useQueryNearbyGoods","GoodsBottom","SCREEN_WIDTH","FEED_CARD_TYPE","IFetchType","ShowWithData","CardContainer","getThemeColor","DetailFooter","footerStyles","StaticLoading","PerformanceWaterfallList","FeedCommonGoodsCard","FeedWeeklyPromotionCard","titleStyle","styles","create","footer","height","alignItems","footerText","marginTop","fontSize","fontWeight","lineHeight","container","paddingBottom","paddingTop","paddingHorizontal","title","marginBottom","color","goodsBottomContainer","marginLeft","NearbyWaterfallList","props","_ref","_ref2","fetchParams","fetchType","onFeedWeeklyItemShow","onFeedWeeklyPress","onItemShow","onItemClick","cardWidth","containerStyle","cardTitle","onEndReachedThreshold","ListFooterComponent","isShowEmpty","setEmpty","onClickMore","onShowClickMore","setIsError","onItemHide","marginRight","cellTopMargin","cellInnerMargin","nearbyFeedsist","setNearbyFeedsist","requestCount","setRequestCount","isEmpty","setIsEmpty","nextFetch","setNextFetch","oldListLength","setOldListLength","reportShowLogs","setReportShowLogs","handleViewableChanged","viewToken","rowData","item","viewTokenIndex","index","forEach","data","columnIndex","itemData","feedItemIndex","isViewable","realIndex","push","Set","handleSetNearbyFeedsList","oldLength","ClickMore","length","newData","slice","setTimeout","PullUp","handleColumnsIndex","Math","floor","key","Date","now","onViewableItemsChanged","changed","isLoading","fetchNextPage","isFetchingNextPage","hasNextPage","isRefetching","isError","pages","_pages$lastIndex","_pages$lastIndex2","nowCount","lastIndex","resultDataLenght","feedList","hasNext","loadingStatus","noMore","handleOnPress","createElement","loading","onPress","isDark","notShowSlogan","onEndReached","getFooter","renderFeedItem","_item$itemData","_item$itemData2","type","COMMON_GOOD_CARD","curItem","WEEKLY_CARD","_item$itemData3","console","log","JSON","stringify","Fragment","style","renderItem","current"],"sources":["index.tsx"],"sourcesContent":["import React, {\n  memo,\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { Text, View, ViewStyle, ViewToken, StyleSheet } from \"react-native\";\nimport { useQueryNearbyGoods } from \"../../../service/NearbyService\";\nimport GoodsBottom from \"../../bottom\";\nimport { SCREEN_WIDTH } from \"@locallife/design-base\";\nimport {\n  FEED_CARD_TYPE,\n  FeedModel,\n  IFetchType,\n  IUseQueryNearbyGoodsParams,\n} from \"../model\";\nimport { EStyleUtil } from \"../../../utils/EStyleUtil\";\nimport { ShowWithData } from \"@locallife/biz-component\";\nimport { CardContainer } from \"../../cardContainer\";\nimport { getThemeColor, jsonStringify } from \"@locallife/utils\";\nimport { WeeklyPromotionModel } from \"../FeedWeeklyPromotionCard/Model/WeeklyPromotionModel\";\nimport { DetailFooter, footerStyles } from \"./footer\";\nimport { StaticLoading } from \"@locallife/fallbackcomponents\";\nimport { PerformanceWaterfallList } from \"../../PerformanceWaterfallList\";\nimport { FeedCommonGoodsCard } from \"../../waterFallList/feedCommonGoodsCard\";\nimport FeedWeeklyPromotionCard from \"../../waterFallList/FeedWeeklyPromotionCard\";\n\nconst titleStyle = getThemeColor(\"cs_common_text_title\");\nconst styles = StyleSheet.create({\n  footer: {\n    height: 80,\n    alignItems: \"center\",\n  },\n  footerText: {\n    marginTop: 16,\n    fontSize: 12,\n    fontWeight: \"400\",\n    lineHeight: 16,\n  },\n  container: {\n    paddingBottom: 16,\n    paddingTop: 12,\n    paddingHorizontal: 0,\n  },\n  title: {\n    fontSize: 16,\n    marginBottom: 12,\n    fontWeight: \"bold\",\n    color: titleStyle,\n  },\n  goodsBottomContainer: {\n    marginTop: 8,\n    marginBottom: 0,\n    marginLeft: 3,\n  },\n});\n\ninterface IProps {\n  fetchType: IFetchType;\n  fetchParams: IUseQueryNearbyGoodsParams;\n  // tableProps\n  onFeedWeeklyItemShow?: (\n    item: WeeklyPromotionModel,\n    index: number,\n    feedItemIndex: number\n  ) => void;\n  onFeedWeeklyPress?: (\n    item: WeeklyPromotionModel,\n    index: number,\n    feedItemIndex: number\n  ) => void;\n  onItemShow?: (item: FeedModel, index: number) => void;\n  onItemHide?: (item: FeedModel, index: number) => void;\n  onItemClick?: (item: any, index: number) => void;\n  cardWidth?: number;\n  containerStyle?: ViewStyle;\n  cardTitle?: string;\n  titleStyle?: ViewStyle;\n  onEndReachedThreshold?: number;\n  ListFooterComponent?: ({\n    hasNextPage,\n    isLoading,\n    isFetchingNextPage,\n    isRefetching,\n  }: {\n    hasNextPage: boolean | undefined;\n    isLoading: boolean;\n    isFetchingNextPage: boolean;\n    isRefetching: boolean;\n  }) => React.ReactElement | null;\n  isShowEmpty?: boolean;\n  setEmpty?: (isEmpty: boolean) => void;\n  onClickMore?: () => void;\n  onShowClickMore?: () => void;\n  setIsError?: (boolean, data: any[]) => void;\n  marginLeft?: number;\n  marginRight?: number;\n  cellTopMargin?: number;\n  cellInnerMargin?: number;\n}\n\nconst NearbyWaterfallList = memo((props: IProps) => {\n  const {\n    fetchParams,\n    fetchType,\n    onFeedWeeklyItemShow,\n    onFeedWeeklyPress,\n    onItemShow,\n    onItemClick,\n    cardWidth = SCREEN_WIDTH / 2,\n    containerStyle,\n    titleStyle,\n    cardTitle,\n    onEndReachedThreshold = 0.2,\n    ListFooterComponent = null,\n    isShowEmpty,\n    setEmpty,\n    onClickMore,\n    onShowClickMore,\n    setIsError,\n    onItemHide,\n    marginLeft,\n    marginRight,\n    cellTopMargin,\n    cellInnerMargin,\n  } = props;\n\n  const [nearbyFeedsist, setNearbyFeedsist] = useState<any[]>([]);\n  const [requestCount, setRequestCount] = useState<number>(0);\n  const [isEmpty, setIsEmpty] = useState<boolean>(false);\n  const [nextFetch, setNextFetch] = useState<boolean>(false);\n  const [oldListLength, setOldListLength] = useState<number>(0);\n  const [reportShowLogs, setReportShowLogs] = useState<number[]>([]);\n\n  const handleViewableChanged = useCallback(\n    (viewToken: ViewToken) => {\n      const { rowData } = viewToken.item;\n      const viewTokenIndex = viewToken.index || 0; // 行数\n      rowData.forEach((data) => {\n        const { columnIndex, itemData } = data;\n        const feedItemIndex =\n          columnIndex === 0 ? viewTokenIndex * 2 : viewTokenIndex * 2 + 1;\n        if (viewToken.isViewable) {\n          onItemShow?.(\n            { ...itemData, realIndex: feedItemIndex },\n            feedItemIndex\n          );\n          reportShowLogs.push(feedItemIndex);\n          setReportShowLogs([...new Set(reportShowLogs)]);\n        } else {\n          onItemHide?.(\n            { ...itemData, realIndex: feedItemIndex },\n            feedItemIndex\n          );\n        }\n      });\n    },\n    [onItemShow, onItemHide, reportShowLogs]\n  );\n\n  const handleSetNearbyFeedsList = useCallback(\n    (data, oldLength) => {\n      if (fetchType === IFetchType.ClickMore && data?.length % 2 === 1) {\n        const newData = data?.slice(0, -1);\n        setNearbyFeedsist([...newData]);\n        return;\n      }\n      setNearbyFeedsist([...data]);\n      setTimeout(() => {\n        setOldListLength(oldLength);\n      }, 20);\n    },\n    [setNearbyFeedsist, fetchType]\n  );\n\n  useEffect(() => {\n    if (oldListLength % 2 === 1 && fetchType === IFetchType.PullUp) {\n      const handleColumnsIndex = Math.floor(oldListLength / 2);\n      handleViewableChanged({\n        key: \"___key\" + Date.now(),\n        isViewable: true,\n        index: handleColumnsIndex,\n        item: {\n          rowData: [\n            {\n              columnIndex: 0,\n              itemData: nearbyFeedsist?.[handleColumnsIndex * 2],\n            },\n            {\n              columnIndex: 1,\n              itemData: nearbyFeedsist?.[handleColumnsIndex * 2 + 1],\n            },\n          ],\n        },\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [oldListLength, nearbyFeedsist, fetchType]);\n\n  const onViewableItemsChanged = useRef(\n    ({ changed }: { changed: Array<ViewToken> }) => {\n      changed.forEach((viewToken) => {\n        handleViewableChanged(viewToken);\n      });\n    }\n  );\n\n  const {\n    isLoading,\n    fetchNextPage,\n    isFetchingNextPage,\n    hasNextPage,\n    isRefetching,\n    isError,\n  } = useQueryNearbyGoods(\n    fetchParams,\n    (pages) => {\n      const nowCount = requestCount + 1;\n      setRequestCount(nowCount);\n      const lastIndex = pages?.length - 1;\n      const resultDataLenght = pages[lastIndex]?.data?.feedList?.length;\n      const hasNext = pages[lastIndex]?.data?.hasNext;\n      if (nowCount === 1 && !resultDataLenght && !nextFetch) {\n        if (hasNext) {\n          setNextFetch(true);\n          fetchNextPage();\n        } else {\n          setIsEmpty(true);\n          setEmpty?.(true);\n        }\n      } else if (nowCount === 2 && !resultDataLenght && nextFetch) {\n        setIsEmpty(true);\n        setEmpty?.(true);\n      }\n    },\n    handleSetNearbyFeedsList,\n    nearbyFeedsist\n  );\n\n  useEffect(() => {\n    if (isError) {\n      // 接口报错的情况\n      setIsError?.(isError, nearbyFeedsist);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isError, nearbyFeedsist]);\n\n  const loadingStatus = useMemo(() => {\n    return isFetchingNextPage || isRefetching || isLoading;\n  }, [isFetchingNextPage, isRefetching, isLoading]);\n\n  const noMore = useMemo(() => {\n    return !hasNextPage && !isFetchingNextPage;\n  }, [hasNextPage, isFetchingNextPage]);\n\n  useEffect(() => {\n    if (!noMore && fetchType === IFetchType.ClickMore && !isEmpty) {\n      onShowClickMore?.();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [noMore, fetchType, isEmpty]);\n\n  const handleOnPress = useCallback(() => {\n    if (loadingStatus || !hasNextPage) {\n      return;\n    }\n    fetchNextPage();\n    onClickMore?.();\n  }, [loadingStatus, hasNextPage, fetchNextPage, onClickMore]);\n\n  const footer = useCallback(() => {\n    if (fetchType === IFetchType.ClickMore) {\n      return (\n        <GoodsBottom\n          loading={false}\n          noMore={noMore || isError}\n          containerStyle={styles.goodsBottomContainer}\n          onPress={handleOnPress}\n        />\n      );\n    }\n    return (\n      <DetailFooter\n        isLoading={loadingStatus}\n        noMore={noMore || isError}\n        isDark={false}\n        notShowSlogan={false}\n      />\n    );\n  }, [fetchType, noMore, isError, loadingStatus, handleOnPress]);\n  const onEndReached = useCallback(() => {\n    if (fetchType === IFetchType.PullUp) {\n      if (loadingStatus || !hasNextPage) {\n        return;\n      }\n      fetchNextPage();\n    }\n  }, [loadingStatus, hasNextPage, fetchNextPage, fetchType]);\n\n  const getFooter = useMemo(() => {\n    if (ListFooterComponent) {\n      return ListFooterComponent({\n        hasNextPage,\n        isLoading,\n        isFetchingNextPage,\n        isRefetching,\n      });\n    } else {\n      return footer();\n    }\n  }, [\n    ListFooterComponent,\n    hasNextPage,\n    isLoading,\n    isFetchingNextPage,\n    isRefetching,\n    footer,\n  ]);\n\n  const renderFeedItem = useCallback(\n    ({ item, index: feedItemIndex }) => {\n      if (item?.itemData?.type === FEED_CARD_TYPE.COMMON_GOOD_CARD) {\n        return (\n          <FeedCommonGoodsCard\n            curItem={item?.itemData}\n            index={feedItemIndex}\n            onItemClick={onItemClick}\n            cardWidth={cardWidth}\n          />\n        );\n      } else if (item?.itemData?.type === FEED_CARD_TYPE.WEEKLY_CARD) {\n        return (\n          <FeedWeeklyPromotionCard\n            data={item?.itemData?.data}\n            feedItemIndex={feedItemIndex}\n            onFeedWeeklyItemShow={onFeedWeeklyItemShow}\n            onFeedWeeklyPress={onFeedWeeklyPress}\n          />\n        );\n      } else {\n        return <View />;\n      }\n    },\n    [onItemClick, onFeedWeeklyItemShow, onFeedWeeklyPress, cardWidth]\n  );\n  console.log(\n    \"styles.title\",\n    JSON.stringify({ ...styles.title }),\n    \"titleStyle\",\n    JSON.stringify({ ...titleStyle })\n  );\n\n  return (\n    <>\n      <ShowWithData data={(nearbyFeedsist || [])?.length > 0}>\n        <CardContainer\n          containerStyle={{\n            ...styles.container,\n            ...containerStyle,\n          }}\n        >\n          {!!cardTitle && (\n            <Text\n              style={{\n                ...styles.title,\n                ...titleStyle,\n              }}\n            >\n              {cardTitle}\n              styles.title\n              {JSON.stringify({ ...styles.title })}\n              titleStyle\n              {JSON.stringify({ ...titleStyle })}\n            </Text>\n          )}\n          <PerformanceWaterfallList\n            data={nearbyFeedsist || []}\n            ListFooterComponent={getFooter}\n            onEndReachedThreshold={onEndReachedThreshold}\n            onEndReached={onEndReached}\n            renderItem={renderFeedItem}\n            onViewableItemsChanged={onViewableItemsChanged.current}\n            marginLeft={marginLeft}\n            marginRight={marginRight}\n            cellTopMargin={cellTopMargin}\n            cellInnerMargin={cellInnerMargin}\n          />\n        </CardContainer>\n      </ShowWithData>\n      {!!(\n        isShowEmpty &&\n        (isEmpty || isError) &&\n        (nearbyFeedsist || [])?.length === 0\n      ) && (\n        <View style={footerStyles.container}>\n          <StaticLoading containerStyle={footerStyles.footer} />\n        </View>\n      )}\n    </>\n  );\n});\n\nexport default NearbyWaterfallList;\n\nexport { NearbyWaterfallList };\n"],"mappings":"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","ignoreList":[]}