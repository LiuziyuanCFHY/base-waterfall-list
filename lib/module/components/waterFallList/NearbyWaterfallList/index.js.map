{"version":3,"names":["React","memo","useCallback","useEffect","useMemo","useRef","useState","Text","View","useQueryNearbyGoods","GoodsBottom","SCREEN_WIDTH","FEED_CARD_TYPE","IFetchType","EStyleUtil","ShowWithData","CardContainer","getThemeColor","DetailFooter","footerStyles","StaticLoading","PerformanceWaterfallList","FeedCommonGoodsCard","FeedWeeklyPromotionCard","styles","create","footer","height","alignItems","footerText","marginTop","fontSize","fontWeight","lineHeight","container","paddingBottom","paddingTop","paddingHorizontal","title","marginBottom","color","goodsBottomContainer","marginLeft","NearbyWaterfallList","props","_ref","_ref2","fetchParams","fetchType","onFeedWeeklyItemShow","onFeedWeeklyPress","onItemShow","onItemClick","cardWidth","containerStyle","titleStyle","cardTitle","onEndReachedThreshold","ListFooterComponent","isShowEmpty","setEmpty","onClickMore","onShowClickMore","setIsError","onItemHide","marginRight","cellTopMargin","cellInnerMargin","nearbyFeedsist","setNearbyFeedsist","requestCount","setRequestCount","isEmpty","setIsEmpty","nextFetch","setNextFetch","oldListLength","setOldListLength","reportShowLogs","setReportShowLogs","handleViewableChanged","viewToken","rowData","item","viewTokenIndex","index","forEach","data","columnIndex","itemData","feedItemIndex","isViewable","realIndex","push","Set","handleSetNearbyFeedsList","oldLength","ClickMore","length","newData","slice","setTimeout","PullUp","handleColumnsIndex","Math","floor","key","Date","now","onViewableItemsChanged","changed","isLoading","fetchNextPage","isFetchingNextPage","hasNextPage","isRefetching","isError","pages","_pages$lastIndex","_pages$lastIndex2","nowCount","lastIndex","resultDataLenght","feedList","hasNext","loadingStatus","noMore","handleOnPress","createElement","loading","onPress","isDark","notShowSlogan","onEndReached","getFooter","renderFeedItem","_item$itemData","_item$itemData2","type","COMMON_GOOD_CARD","curItem","WEEKLY_CARD","_item$itemData3","Fragment","style","renderItem","current"],"sources":["index.tsx"],"sourcesContent":["import React, {\n    memo,\n    useCallback,\n    useEffect,\n    useMemo,\n    useRef,\n    useState,\n} from 'react';\nimport { Text, View, ViewStyle, ViewToken } from 'react-native';\nimport { useQueryNearbyGoods } from '../../../service/NearbyService';\nimport GoodsBottom from '../../bottom';\nimport { SCREEN_WIDTH } from '@locallife/design-base';\nimport {\n    FEED_CARD_TYPE,\n    FeedModel,\n    IFetchType,\n    IUseQueryNearbyGoodsParams,\n} from '../model';\nimport { EStyleUtil } from '../../../utils/EStyleUtil';\nimport { ShowWithData } from '@locallife/biz-component';\nimport { CardContainer } from '../../cardContainer';\nimport { getThemeColor, jsonStringify } from '@locallife/utils';\nimport { WeeklyPromotionModel } from '../FeedWeeklyPromotionCard/Model/WeeklyPromotionModel';\nimport { DetailFooter, footerStyles } from './footer';\nimport { StaticLoading } from '@locallife/fallbackcomponents';\nimport { PerformanceWaterfallList } from '../../PerformanceWaterfallList';\nimport { FeedCommonGoodsCard } from '../../waterFallList/feedCommonGoodsCard';\nimport FeedWeeklyPromotionCard from '../../waterFallList/FeedWeeklyPromotionCard';\n\nconst styles = EStyleUtil.create({\n    footer: {\n        height: 80,\n        alignItems: 'center',\n    },\n    footerText: {\n        marginTop: 16,\n        fontSize: 12,\n        fontWeight: '400',\n        lineHeight: 16,\n    },\n    container: {\n        paddingBottom: 16,\n        paddingTop: 12,\n        paddingHorizontal: 0,\n    },\n    title: {\n        fontSize: 16,\n        marginBottom: 12,\n        fontWeight: 'bold',\n        color: () => getThemeColor('cs_common_text_title'),\n    },\n    goodsBottomContainer: {\n        marginTop: 8,\n        marginBottom: 0,\n        marginLeft: 3,\n    },\n});\n\ninterface IProps {\n    fetchType: IFetchType;\n    fetchParams: IUseQueryNearbyGoodsParams;\n    // tableProps\n    onFeedWeeklyItemShow?: (\n        item: WeeklyPromotionModel,\n        index: number,\n        feedItemIndex: number,\n    ) => void;\n    onFeedWeeklyPress?: (\n        item: WeeklyPromotionModel,\n        index: number,\n        feedItemIndex: number,\n    ) => void;\n    onItemShow?: (item: FeedModel, index: number) => void;\n    onItemHide?: (item: FeedModel, index: number) => void;\n    onItemClick?: (item: any, index: number) => void;\n    cardWidth?: number;\n    containerStyle?: ViewStyle;\n    cardTitle?: string;\n    titleStyle?: ViewStyle;\n    onEndReachedThreshold?: number;\n    ListFooterComponent?: ({\n        hasNextPage,\n        isLoading,\n        isFetchingNextPage,\n        isRefetching,\n    }: {\n        hasNextPage: boolean | undefined;\n        isLoading: boolean;\n        isFetchingNextPage: boolean;\n        isRefetching: boolean;\n    }) => React.ReactElement | null;\n    isShowEmpty?: boolean;\n    setEmpty?: (isEmpty: boolean) => void;\n    onClickMore?: () => void;\n    onShowClickMore?: () => void;\n    setIsError?: (boolean, data: any[]) => void;\n    marginLeft?: number;\n    marginRight?: number;\n    cellTopMargin?: number;\n    cellInnerMargin?: number;\n}\n\nconst NearbyWaterfallList = memo((props: IProps) => {\n    const {\n        fetchParams,\n        fetchType,\n        onFeedWeeklyItemShow,\n        onFeedWeeklyPress,\n        onItemShow,\n        onItemClick,\n        cardWidth = SCREEN_WIDTH / 2,\n        containerStyle,\n        titleStyle,\n        cardTitle,\n        onEndReachedThreshold = 0.2,\n        ListFooterComponent = null,\n        isShowEmpty,\n        setEmpty,\n        onClickMore,\n        onShowClickMore,\n        setIsError,\n        onItemHide,\n        marginLeft,\n        marginRight,\n        cellTopMargin,\n        cellInnerMargin,\n    } = props;\n\n    const [nearbyFeedsist, setNearbyFeedsist] = useState<any[]>([]);\n    const [requestCount, setRequestCount] = useState<number>(0);\n    const [isEmpty, setIsEmpty] = useState<boolean>(false);\n    const [nextFetch, setNextFetch] = useState<boolean>(false);\n    const [oldListLength, setOldListLength] = useState<number>(0);\n    const [reportShowLogs, setReportShowLogs] = useState<number[]>([]);\n\n    const handleViewableChanged = useCallback(\n        (viewToken: ViewToken) => {\n            const { rowData } = viewToken.item;\n            const viewTokenIndex = viewToken.index || 0; // 行数\n            rowData.forEach((data) => {\n                const { columnIndex, itemData } = data;\n                const feedItemIndex =\n                    columnIndex === 0\n                        ? viewTokenIndex * 2\n                        : viewTokenIndex * 2 + 1;\n                if (viewToken.isViewable) {\n                    onItemShow?.(\n                        { ...itemData, realIndex: feedItemIndex },\n                        feedItemIndex,\n                    );\n                    reportShowLogs.push(feedItemIndex);\n                    setReportShowLogs([...new Set(reportShowLogs)]);\n                } else {\n                    onItemHide?.(\n                        { ...itemData, realIndex: feedItemIndex },\n                        feedItemIndex,\n                    );\n                }\n            });\n        },\n        [onItemShow, onItemHide, reportShowLogs],\n    );\n\n    const handleSetNearbyFeedsList = useCallback(\n        (data, oldLength) => {\n            if (fetchType === IFetchType.ClickMore && data?.length % 2 === 1) {\n                const newData = data?.slice(0, -1);\n                setNearbyFeedsist([...newData]);\n                return;\n            }\n            setNearbyFeedsist([...data]);\n            setTimeout(() => {\n                setOldListLength(oldLength);\n            }, 20);\n        },\n        [setNearbyFeedsist, fetchType],\n    );\n\n    useEffect(() => {\n        if (oldListLength % 2 === 1 && fetchType === IFetchType.PullUp) {\n            const handleColumnsIndex = Math.floor(oldListLength / 2);\n            handleViewableChanged({\n                key: '___key' + Date.now(),\n                isViewable: true,\n                index: handleColumnsIndex,\n                item: {\n                    rowData: [\n                        {\n                            columnIndex: 0,\n                            itemData: nearbyFeedsist?.[handleColumnsIndex * 2],\n                        },\n                        {\n                            columnIndex: 1,\n                            itemData:\n                                nearbyFeedsist?.[handleColumnsIndex * 2 + 1],\n                        },\n                    ],\n                },\n            });\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [oldListLength, nearbyFeedsist, fetchType]);\n\n    const onViewableItemsChanged = useRef(\n        ({ changed }: { changed: Array<ViewToken> }) => {\n            changed.forEach((viewToken) => {\n                handleViewableChanged(viewToken);\n            });\n        },\n    );\n\n    const {\n        isLoading,\n        fetchNextPage,\n        isFetchingNextPage,\n        hasNextPage,\n        isRefetching,\n        isError,\n    } = useQueryNearbyGoods(\n        fetchParams,\n        (pages) => {\n            const nowCount = requestCount + 1;\n            setRequestCount(nowCount);\n            const lastIndex = pages?.length - 1;\n            const resultDataLenght = pages[lastIndex]?.data?.feedList?.length;\n            const hasNext = pages[lastIndex]?.data?.hasNext;\n            if (nowCount === 1 && !resultDataLenght && !nextFetch) {\n                if (hasNext) {\n                    setNextFetch(true);\n                    fetchNextPage();\n                } else {\n                    setIsEmpty(true);\n                    setEmpty?.(true);\n                }\n            } else if (nowCount === 2 && !resultDataLenght && nextFetch) {\n                setIsEmpty(true);\n                setEmpty?.(true);\n            }\n        },\n        handleSetNearbyFeedsList,\n        nearbyFeedsist,\n    );\n\n    useEffect(() => {\n        if (isError) {\n            // 接口报错的情况\n            setIsError?.(isError, nearbyFeedsist);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [isError, nearbyFeedsist]);\n\n    const loadingStatus = useMemo(() => {\n        return isFetchingNextPage || isRefetching || isLoading;\n    }, [isFetchingNextPage, isRefetching, isLoading]);\n\n    const noMore = useMemo(() => {\n        return !hasNextPage && !isFetchingNextPage;\n    }, [hasNextPage, isFetchingNextPage]);\n\n    useEffect(() => {\n        if (!noMore && fetchType === IFetchType.ClickMore && !isEmpty) {\n            onShowClickMore?.();\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [noMore, fetchType, isEmpty]);\n\n    const handleOnPress = useCallback(() => {\n        if (loadingStatus || !hasNextPage) {\n            return;\n        }\n        fetchNextPage();\n        onClickMore?.();\n    }, [loadingStatus, hasNextPage, fetchNextPage, onClickMore]);\n\n    const footer = useCallback(() => {\n        if (fetchType === IFetchType.ClickMore) {\n            return (\n                <GoodsBottom\n                    loading={false}\n                    noMore={noMore || isError}\n                    containerStyle={styles.goodsBottomContainer}\n                    onPress={handleOnPress}\n                />\n            );\n        }\n        return (\n            <DetailFooter\n                isLoading={loadingStatus}\n                noMore={noMore || isError}\n                isDark={false}\n                notShowSlogan={false}\n            />\n        );\n    }, [fetchType, noMore, isError, loadingStatus, handleOnPress]);\n    const onEndReached = useCallback(() => {\n        if (fetchType === IFetchType.PullUp) {\n            if (loadingStatus || !hasNextPage) {\n                return;\n            }\n            fetchNextPage();\n        }\n    }, [loadingStatus, hasNextPage, fetchNextPage, fetchType]);\n\n    const getFooter = useMemo(() => {\n        if (ListFooterComponent) {\n            return ListFooterComponent({\n                hasNextPage,\n                isLoading,\n                isFetchingNextPage,\n                isRefetching,\n            });\n        } else {\n            return footer();\n        }\n    }, [\n        ListFooterComponent,\n        hasNextPage,\n        isLoading,\n        isFetchingNextPage,\n        isRefetching,\n        footer,\n    ]);\n\n    const renderFeedItem = useCallback(\n        ({ item, index: feedItemIndex }) => {\n            if (item?.itemData?.type === FEED_CARD_TYPE.COMMON_GOOD_CARD) {\n                return (\n                    <FeedCommonGoodsCard\n                        curItem={item?.itemData}\n                        index={feedItemIndex}\n                        onItemClick={onItemClick}\n                        cardWidth={cardWidth}\n                    />\n                );\n            } else if (item?.itemData?.type === FEED_CARD_TYPE.WEEKLY_CARD) {\n                return (\n                    <FeedWeeklyPromotionCard\n                        data={item?.itemData?.data}\n                        feedItemIndex={feedItemIndex}\n                        onFeedWeeklyItemShow={onFeedWeeklyItemShow}\n                        onFeedWeeklyPress={onFeedWeeklyPress}\n                    />\n                );\n            } else {\n                return <View />;\n            }\n        },\n        [onItemClick, onFeedWeeklyItemShow, onFeedWeeklyPress, cardWidth],\n    );\n\n    return (\n        <>\n            <ShowWithData data={(nearbyFeedsist || [])?.length > 0}>\n                <CardContainer\n                    containerStyle={{\n                        ...styles.container,\n                        ...containerStyle,\n                    }}\n                >\n                    {!!cardTitle && (\n                        <Text\n                            style={{\n                                ...styles.title,\n                                ...titleStyle,\n                            }}\n                        >\n                            {cardTitle}\n                        </Text>\n                    )}\n                    <PerformanceWaterfallList\n                        data={nearbyFeedsist || []}\n                        ListFooterComponent={getFooter}\n                        onEndReachedThreshold={onEndReachedThreshold}\n                        onEndReached={onEndReached}\n                        renderItem={renderFeedItem}\n                        onViewableItemsChanged={onViewableItemsChanged.current}\n                        marginLeft={marginLeft}\n                        marginRight={marginRight}\n                        cellTopMargin={cellTopMargin}\n                        cellInnerMargin={cellInnerMargin}\n                    />\n                </CardContainer>\n            </ShowWithData>\n            {!!(\n                isShowEmpty &&\n                (isEmpty || isError) &&\n                (nearbyFeedsist || [])?.length === 0\n            ) && (\n                <View style={footerStyles.container}>\n                    <StaticLoading containerStyle={footerStyles.footer} />\n                </View>\n            )}\n        </>\n    );\n});\n\nexport default NearbyWaterfallList;\n\nexport { NearbyWaterfallList };\n"],"mappings":"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","ignoreList":[]}