{"version":3,"names":["_reactNative","require","_reactNativeExtendedStylesheet","_interopRequireDefault","_utils","e","__esModule","default","_defineProperty","r","t","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","TypeError","String","Number","localLifeBizFeedCardAdaptScreen","exports","changeLocalLifeBizFeedCardAdaptScreen","adaptScreen","DIMENSIONS_WHITE_LIST","EStyleWrapper","constructor","$theme","NativeModules","KSAppearance","getColorScheme","styles","key","updateNumberStyles","EStyleSheet","create","includes","rem","build","obj","globalRows","namespace","flatten","style","transNumberToRem","num","EStyleUtil"],"sources":["EStyleUtil.ts"],"sourcesContent":["import {\n    ImageStyle,\n    NativeModules,\n    StyleProp,\n    TextStyle,\n    ViewStyle,\n} from 'react-native';\nimport EStyleSheet from 'react-native-extended-stylesheet';\nimport { TTheme } from '@locallife/utils';\nimport { rem } from '@kid-ui/krn/lib/utils';\n\nexport let localLifeBizFeedCardAdaptScreen = false;\nexport const changeLocalLifeBizFeedCardAdaptScreen = (adaptScreen: boolean) => {\n    localLifeBizFeedCardAdaptScreen = adaptScreen;\n};\n\ntype Function<K> = () => K;\ntype Value<T> = T | (string & {});\ntype Variable<T> = Value<T> | Function<Value<T>>;\ntype Extended<T> = { [K in keyof T]: Variable<T[K]> };\n\nexport type AnyStyle = ImageStyle & TextStyle & ViewStyle;\ntype AnyStyleSet = { [key: string]: AnyStyle };\ntype MediaQuery = { [key: string]: Extended<AnyStyle> };\n\ntype EStyleSet<T = any> = {\n    [K in keyof T]: T[K] extends Variable<number>\n        ? T[K]\n        : T[K] extends MediaQuery\n        ? T[K]\n        : Extended<AnyStyle>;\n};\ntype StyleSet<T = any> = {\n    [K in keyof T]: T[K] extends number\n        ? T[K]\n        : T[K] extends string\n        ? T[K]\n        : T[K] extends Function<number>\n        ? number\n        : T[K] extends Function<string>\n        ? string\n        : T[K] extends MediaQuery\n        ? AnyStyleSet\n        : AnyStyle;\n};\n\nconst DIMENSIONS_WHITE_LIST = [\n    'flex',\n    'flexGrow',\n    'flexShrink',\n    'flexBasis',\n    'zIndex',\n    'aspectRatio',\n    'opacity',\n    'elevation',\n    'shadowOpacity',\n    'scale',\n];\n\ninterface EStyleRows {\n    $theme?: TTheme;\n}\nclass EStyleWrapper {\n    globalRows: EStyleRows = {\n        $theme: NativeModules.KSAppearance.getColorScheme() as TTheme,\n    };\n\n    updateNumberStyles(styles: AnyStyle): void {\n        for (const key in styles) {\n            if (\n                typeof styles[key] === 'number' &&\n                !DIMENSIONS_WHITE_LIST.includes(key)\n            ) {\n                styles[key] = rem(styles[key]);\n            }\n        }\n    }\n    create = <T = EStyleSet>(styles: EStyleSet<T>) => {\n        if (localLifeBizFeedCardAdaptScreen) {\n            for (const key in styles) {\n                if (typeof styles[key] === 'object') {\n                    this.updateNumberStyles(styles[key] as AnyStyle);\n                }\n            }\n        }\n        return EStyleSheet.create(styles) as StyleSet<T>;\n    };\n\n    build(obj: EStyleRows = {}) {\n        this.globalRows = { ...this.globalRows, ...obj };\n        EStyleSheet.build(this.globalRows);\n    }\n\n    value(namespace: keyof EStyleRows) {\n        return EStyleSheet.value(namespace);\n    }\n\n    flatten<T>(style?: StyleProp<T>) {\n        return EStyleSheet.flatten(style);\n    }\n\n    /**\n     * 将数字转换为rem，用于在EStyleUtil样式***外***使用\n     * 某些场景中你需要和EStyleUtil样式内的数字保持一致，可以使用该方法，因为EStyleUtil样式内的数字已经默认转换了\n     * @param num\n     */\n    transNumberToRem(num: number) {\n        return rem(num);\n    }\n}\nexport const EStyleUtil = new EStyleWrapper();\n"],"mappings":";;;;;;AAAA,IAAAA,YAAA,GAAAC,OAAA;AAOA,IAAAC,8BAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,IAAAG,MAAA,GAAAH,OAAA;AAA4C,SAAAE,uBAAAE,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAG,gBAAAH,CAAA,EAAAI,CAAA,EAAAC,CAAA,YAAAD,CAAA,GAAAE,cAAA,CAAAF,CAAA,MAAAJ,CAAA,GAAAO,MAAA,CAAAC,cAAA,CAAAR,CAAA,EAAAI,CAAA,IAAAK,KAAA,EAAAJ,CAAA,EAAAK,UAAA,MAAAC,YAAA,MAAAC,QAAA,UAAAZ,CAAA,CAAAI,CAAA,IAAAC,CAAA,EAAAL,CAAA;AAAA,SAAAM,eAAAD,CAAA,QAAAQ,CAAA,GAAAC,YAAA,CAAAT,CAAA,uCAAAQ,CAAA,GAAAA,CAAA,GAAAA,CAAA;AAAA,SAAAC,aAAAT,CAAA,EAAAD,CAAA,2BAAAC,CAAA,KAAAA,CAAA,SAAAA,CAAA,MAAAL,CAAA,GAAAK,CAAA,CAAAU,MAAA,CAAAC,WAAA,kBAAAhB,CAAA,QAAAa,CAAA,GAAAb,CAAA,CAAAiB,IAAA,CAAAZ,CAAA,EAAAD,CAAA,uCAAAS,CAAA,SAAAA,CAAA,YAAAK,SAAA,yEAAAd,CAAA,GAAAe,MAAA,GAAAC,MAAA,EAAAf,CAAA;AAErC,IAAIgB,+BAA+B,GAAAC,OAAA,CAAAD,+BAAA,GAAG,KAAK;AAC3C,MAAME,qCAAqC,GAAIC,WAAoB,IAAK;EAC3EF,OAAA,CAAAD,+BAAA,GAAAA,+BAA+B,GAAGG,WAAW;AACjD,CAAC;AAACF,OAAA,CAAAC,qCAAA,GAAAA,qCAAA;AAgCF,MAAME,qBAAqB,GAAG,CAC1B,MAAM,EACN,UAAU,EACV,YAAY,EACZ,WAAW,EACX,QAAQ,EACR,aAAa,EACb,SAAS,EACT,WAAW,EACX,eAAe,EACf,OAAO,CACV;AAKD,MAAMC,aAAa,CAAC;EAAAC,YAAA;IAAAxB,eAAA,qBACS;MACrByB,MAAM,EAAEC,0BAAa,CAACC,YAAY,CAACC,cAAc,CAAC;IACtD,CAAC;IAAA5B,eAAA,iBAYwB6B,MAAoB,IAAK;MAC9C,IAAIX,+BAA+B,EAAE;QACjC,KAAK,MAAMY,GAAG,IAAID,MAAM,EAAE;UACtB,IAAI,OAAOA,MAAM,CAACC,GAAG,CAAC,KAAK,QAAQ,EAAE;YACjC,IAAI,CAACC,kBAAkB,CAACF,MAAM,CAACC,GAAG,CAAa,CAAC;UACpD;QACJ;MACJ;MACA,OAAOE,sCAAW,CAACC,MAAM,CAACJ,MAAM,CAAC;IACrC,CAAC;EAAA;EAnBDE,kBAAkBA,CAACF,MAAgB,EAAQ;IACvC,KAAK,MAAMC,GAAG,IAAID,MAAM,EAAE;MACtB,IACI,OAAOA,MAAM,CAACC,GAAG,CAAC,KAAK,QAAQ,IAC/B,CAACR,qBAAqB,CAACY,QAAQ,CAACJ,GAAG,CAAC,EACtC;QACED,MAAM,CAACC,GAAG,CAAC,GAAG,IAAAK,UAAG,EAACN,MAAM,CAACC,GAAG,CAAC,CAAC;MAClC;IACJ;EACJ;EAYAM,KAAKA,CAACC,GAAe,GAAG,CAAC,CAAC,EAAE;IACxB,IAAI,CAACC,UAAU,GAAG;MAAE,GAAG,IAAI,CAACA,UAAU;MAAE,GAAGD;IAAI,CAAC;IAChDL,sCAAW,CAACI,KAAK,CAAC,IAAI,CAACE,UAAU,CAAC;EACtC;EAEAhC,KAAKA,CAACiC,SAA2B,EAAE;IAC/B,OAAOP,sCAAW,CAAC1B,KAAK,CAACiC,SAAS,CAAC;EACvC;EAEAC,OAAOA,CAAIC,KAAoB,EAAE;IAC7B,OAAOT,sCAAW,CAACQ,OAAO,CAACC,KAAK,CAAC;EACrC;;EAEA;AACJ;AACA;AACA;AACA;EACIC,gBAAgBA,CAACC,GAAW,EAAE;IAC1B,OAAO,IAAAR,UAAG,EAACQ,GAAG,CAAC;EACnB;AACJ;AACO,MAAMC,UAAU,GAAAzB,OAAA,CAAAyB,UAAA,GAAG,IAAIrB,aAAa,CAAC,CAAC","ignoreList":[]}